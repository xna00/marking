<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Marking Extension</title>
    <style>
      body {
        width: 400px;
        padding: 10px;
        font-family: Arial, sans-serif;
      }
      #capturedImage {
        max-width: 100%;
        margin-top: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
      }
      .settings-section {
        margin-top: 20px;
        padding: 15px;
        border: 1px solid #eee;
        border-radius: 4px;
        background-color: #f9f9f9;
      }
      .settings-section h4 {
        margin-top: 0;
        margin-bottom: 10px;
        color: #333;
      }
      label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
        font-size: 14px;
      }
      select,
      textarea,
      button {
        width: 100%;
        margin-bottom: 10px;
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 4px;
        box-sizing: border-box;
      }
      textarea {
        height: 150px;
        resize: vertical;
        font-family: monospace;
        font-size: 12px;
      }
      button {
        background-color: #4caf50;
        color: white;
        border: none;
        cursor: pointer;
      }
      button:hover {
        background-color: #45a049;
      }
      .save-message {
        color: green;
        font-size: 12px;
        margin-top: 5px;
      }
    </style>
  </head>
  <body>
    <label for="doubaoKeyInput">API Key</label>
    <input
      type="password"
      id="doubaoKeyInput"
      placeholder="Enter your Doubao API Key"
      style="
        width: 100%;
        margin-bottom: 10px;
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 4px;
        box-sizing: border-box;
      "
    />

    <label for="modelSelect">Select AI Model:</label>
    <select id="modelSelect"></select>

    <label for="promptTextarea">System Prompt:</label>
    <textarea id="promptTextarea">
你是一名化学老师，正在批改试卷，你要批改的是第(4)题,一共5个空。这是评分标准：
序号|位置|分值|评分标准
-|-|-|-
1|第一行左边|1|500mL容量瓶(不写“500mL”不得分，把“容量瓶”写成“溶量瓶”不得分)
2|第一行右边|2|13.6
3|第二行|1|25
4|第三行|2|将浓硫酸沿烧杯内壁缓慢注入水中(给分点一),并用玻璃棒不断搅拌(给分点二)（合理即可）
5|第四行|2|C

给你发答题卡的图片，你需要做：
1.识别出图片中每个空的内容
2.根据评分标准，判断每个空的得分
3.以[["1中识别出的内容","得分","原因(只写关键词)"],...]格式返回结果
    </textarea>
    <div>
      <label for="img">答题卡图片<span id="imageInfo" style="font-size: 0.8em; color: gray;"></span></label>
      <img id="cardImage" width="100%">
    </div>
    <div id="result" style="min-height: 100px;overflow: auto;"></div>
    <button id="markButton">评分</button>
    <script src="popup.js" type="module"></script>
  </body>
</html>
